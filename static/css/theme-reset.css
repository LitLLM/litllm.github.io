/* High-specificity selectors to override inline styles */

/* Light mode styles with high specificity to counteract dark mode persistance */
html[data-theme="light"] body,
body[style*="background-color"]:where(html[data-theme="light"] *) {
    background-color: #f9f9f9 !important;
    background-image: linear-gradient(to bottom, #ffffff, #f5f5f5) !important;
    color: #333 !important;
}

html[data-theme="light"] .hero,
.hero[style*="background"]:where(html[data-theme="light"] *) {
    background: linear-gradient(135deg, rgba(50, 115, 220, 0.05), rgba(72, 95, 199, 0.05)) !important;
}

html[data-theme="light"] .section,
.section[style*="background-color"]:where(html[data-theme="light"] *) {
    background-color: white !important;
    border: 1px solid rgba(0, 0, 0, 0.05) !important;
}

html[data-theme="light"] figure,
figure[style*="background-color"]:where(html[data-theme="light"] *) {
    background-color: white !important;
}

/* Publication title light mode with high specificity */
html[data-theme="light"] .publication-title,
.publication-title[style*="background"]:where(html[data-theme="light"] *) {
    background: linear-gradient(90deg, #3273dc, #485fc7) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    text-shadow: none !important;
}

/* Feature items light mode */
html[data-theme="light"] .feature-item,
.feature-item[style*="background-color"]:where(html[data-theme="light"] *) {
    background-color: #ffffff !important;
    border-left: 4px solid #3273dc !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03) !important;
}

html[data-theme="light"] .feature-item:nth-child(even),
.feature-item:nth-child(even)[style*="background-color"]:where(html[data-theme="light"] *) {
    border-left: 4px solid #485fc7 !important;
}

/* Feature number light mode with enhanced specificity */
html[data-theme="light"] .feature-number,
.feature-number[style*="color"]:where(html[data-theme="light"] *) {
    color: rgba(50, 115, 220, 0.5) !important;
    font-weight: bold !important;
    text-shadow: 0 0 1px rgba(50, 115, 220, 0.1) !important;
}

html[data-theme="light"] .feature-item:nth-child(even) .feature-number,
.feature-item:nth-child(even) .feature-number[style*="color"]:where(html[data-theme="light"] *) {
    color: rgba(72, 95, 199, 0.5) !important;
}

/* Feature content headings and paragraphs in light mode */
html[data-theme="light"] .feature-content h4,
.feature-content h4[style*="color"]:where(html[data-theme="light"] *) {
    color: #333333 !important;
    font-weight: 600 !important;
}

html[data-theme="light"] .feature-content p,
.feature-content p[style*="color"]:where(html[data-theme="light"] *) {
    color: #444444 !important;
}

/* Light mode TLDR box */
html[data-theme="light"] .tldr-box,
.tldr-box[style*="background-color"]:where(html[data-theme="light"] *) {
    background-color: #f9f9f9 !important;
    border-left: 5px solid #3273dc !important;
}

html[data-theme="light"] .tldr-title,
.tldr-title[style*="color"]:where(html[data-theme="light"] *) {
    color: #3273dc !important;
}

/* Light mode Abstract text */
html[data-theme="light"] .abstract-text,
.abstract-text[style*="background-color"]:where(html[data-theme="light"] *) {
    background-color: rgba(50, 115, 220, 0.03) !important;
    color: #444444 !important;
}

/* Light mode figcaption styling */
html[data-theme="light"] figcaption,
figcaption[style*="color"]:where(html[data-theme="light"] *) {
    color: #666666 !important;
    border-top: 1px solid #eeeeee !important;
}

html[data-theme="light"] figcaption b,
figcaption b[style*="color"]:where(html[data-theme="light"] *) {
    color: #333333 !important;
    font-weight: 600 !important;
}

/* Light mode copy button styles */
html[data-theme="light"] .copy-button,
.copy-button[style*="background-color"]:where(html[data-theme="light"] *) {
    background-color: rgba(0, 0, 0, 0.05) !important;
    color: #666666 !important;
}

html[data-theme="light"] .copy-button:hover,
.copy-button[style*="background-color"]:hover:where(html[data-theme="light"] *) {
    background-color: rgba(0, 0, 0, 0.1) !important;
}

html[data-theme="light"] .copy-button.copied,
.copy-button.copied[style*="background-color"]:where(html[data-theme="light"] *) {
    background-color: rgba(40, 167, 69, 0.2) !important;
    color: #28a745 !important;
}

/* Dark mode overrides with very high specificity */
html[data-theme="dark"] body,
body[style*="background-color"]:where(html[data-theme="dark"] *) {
    background-color: #121212 !important;
    background-image: none !important;
    color: #e0e0e0 !important;
}

html[data-theme="dark"] .hero,
.hero[style*="background"]:where(html[data-theme="dark"] *) {
    background: linear-gradient(135deg, rgba(79, 134, 222, 0.15), rgba(100, 119, 210, 0.15)) !important;
}

/* Publication title - ensuring high contrast for the main title */
html[data-theme="dark"] .publication-title,
.publication-title[style*="background"]:where(html[data-theme="dark"] *) {
    background: linear-gradient(90deg, #64b5ff, #96a4ff) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    text-shadow: 0 0 8px rgba(100, 181, 255, 0.3) !important;
}

html[data-theme="dark"] .section,
.section[style*="background-color"]:where(html[data-theme="dark"] *) {
    background-color: #1e1e1e !important;
}

html[data-theme="dark"] figure,
figure[style*="background-color"]:where(html[data-theme="dark"] *) {
    background-color: #1e1e1e !important;
}

html[data-theme="dark"] .feature-item,
.feature-item[style*="background-color"]:where(html[data-theme="dark"] *) {
    background-color: #1e1e1e !important;
    border-left: 4px solid #5e9cf9 !important;
}

html[data-theme="dark"] .feature-item:nth-child(even),
.feature-item:nth-child(even)[style*="background-color"]:where(html[data-theme="dark"] *) {
    border-left: 4px solid #7a8eec !important;
}

/* Feature number color */
html[data-theme="dark"] .feature-number,
.feature-number[style*="color"]:where(html[data-theme="dark"] *) {
    color: rgba(94, 156, 249, 0.4) !important;
}

html[data-theme="dark"] .feature-item:nth-child(even) .feature-number,
.feature-item:nth-child(even) .feature-number[style*="color"]:where(html[data-theme="dark"] *) {
    color: rgba(122, 142, 236, 0.4) !important;
}

/* Feature content text */
html[data-theme="dark"] .feature-content h4,
.feature-content h4[style*="color"]:where(html[data-theme="dark"] *) {
    color: #e0e0e0 !important;
}

html[data-theme="dark"] .feature-content p,
.feature-content p[style*="color"]:where(html[data-theme="dark"] *) {
    color: #d0d0d0 !important;
}

html[data-theme="dark"] .tldr-box,
.tldr-box[style*="background-color"]:where(html[data-theme="dark"] *) {
    background-color: #252525 !important;
    border-left: 5px solid #5e9cf9 !important;
}

html[data-theme="dark"] .tldr-title,
.tldr-title[style*="color"]:where(html[data-theme="dark"] *) {
    color: #7a8eec !important;
}

html[data-theme="dark"] .citation-box,
.citation-box[style*="background-color"]:where(html[data-theme="dark"] *) {
    background-color: #252525 !important;
    color: #d0d0d0 !important;
}

html[data-theme="dark"] .coming-soon,
.coming-soon[style*="background-color"]:where(html[data-theme="dark"] *) {
    background-color: #403500 !important;
    color: #ffd554 !important;
}

/* Abstract text */
html[data-theme="dark"] .abstract-text,
.abstract-text[style*="background-color"]:where(html[data-theme="dark"] *) {
    background-color: rgba(94, 156, 249, 0.07) !important;
    color: #d0d0d0 !important;
}

/* Figcaption */
html[data-theme="dark"] figcaption,
figcaption[style*="color"]:where(html[data-theme="dark"] *) {
    color: #b0b0b0 !important;
    border-top: 1px solid #333333 !important;
}

/* Override the .title elements */
html[data-theme="dark"] .title:not(.publication-title),
html[data-theme="dark"] .subtitle {
    color: #e0e0e0 !important;
}

/* TMLR badge color override */
html[data-theme="dark"] .tmlr-badge p,
html[data-theme="dark"] .tmlr-badge p[style*="color"] {
    color: #e0e0e0 !important;
}

/* Dark mode copy button styles */
html[data-theme="dark"] .copy-button,
.copy-button[style*="background-color"]:where(html[data-theme="dark"] *) {
    background-color: rgba(255, 255, 255, 0.1) !important;
    color: #b0b0b0 !important;
}

html[data-theme="dark"] .copy-button:hover,
.copy-button[style*="background-color"]:hover:where(html[data-theme="dark"] *) {
    background-color: rgba(255, 255, 255, 0.15) !important;
}

html[data-theme="dark"] .copy-button.copied,
.copy-button.copied[style*="background-color"]:where(html[data-theme="dark"] *) {
    background-color: rgba(40, 167, 69, 0.2) !important;
    color: #4cd964 !important;
}